<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">
	<h:head>
		<h:title>Date &amp; Time</h:title>
		<model>
			<instance>
				<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/967d6d7d3ade8365b7d16ee75aced3283b44a092" uiVersion="1" version="711" name="Date &amp; Time">
					<f_intro/>
					<date_time>
						<f_today/>
						<date_now/>
						<date_int/>
						<dt_int/>
						<format_date/>
						<int_now/>
						<min_time/>
						<hidden_datetime/>
					</date_time>
					<dob/>
					<string_date/>
					<dob_validate/>
					<string_hidden/>
					<months_hidden/>
					<dob_years/>
				<orx:meta xmlns:cc="http://commcarehq.org/xforms"><orx:deviceID/><orx:timeStart/><orx:timeEnd/><orx:username/><orx:userID/><orx:instanceID/><cc:appVersion/><cc:location/></orx:meta></data>
			</instance><instance id="commcaresession" src="jr://instance/session"/>
			<bind nodeset="/data/f_intro"/>
			<bind nodeset="/data/date_time"/>
			<bind nodeset="/data/date_time/f_today"/>
			<bind nodeset="/data/date_time/date_now"/>
			<bind nodeset="/data/date_time/date_int"/>
			<bind nodeset="/data/date_time/dt_int"/>
			<bind nodeset="/data/date_time/format_date"/>
			<bind nodeset="/data/date_time/int_now"/>
			<bind nodeset="/data/date_time/min_time"/>
			<bind nodeset="/data/date_time/hidden_datetime" calculate="double(now())"/>
			<bind nodeset="/data/dob" type="xsd:date"/>
			<bind nodeset="/data/string_date"/>
			<bind nodeset="/data/dob_validate"/>
			<bind nodeset="/data/string_hidden" calculate="substr(/data/dob, 0, 4)"/>
			<bind nodeset="/data/months_hidden" calculate="int((today() - date(/data/dob)) div 30.4)"/>
			<bind nodeset="/data/dob_years" calculate="int((today() - date(/data/dob)) div 365.25)"/>
			<itext>
				<translation lang="en" default="">
					<text id="f_intro-label">
						<value>This form tests date &amp; time functions. Please verify each question displays what it says it's supposed to. 

The following screen will display multiple questions per screen, if using an Android device. Otherwise, they'll be listed as separate questions.</value>
					</text>
					<text id="date_time-label">
						<value>date_time</value>
					</text>
					<text id="f_today-label">
						<value>This should display today's date with the format YYYY-MM-DD: <output ref="today()"/></value>
					</text>
					<text id="date_now-label">
						<value>This should also display today's date in the format YYYY-MM-DD: <output ref="date(now())"/></value>
					</text>
					<text id="date_int-label">
						<value>This should display an integer, which represents the date in days: <output ref="int(today())"/></value>
					</text>
					<text id="dt_int-label">
						<value>This should display a decimal number which represents the date and time in days: <output value="/data/date_time/hidden_datetime"/></value>
					</text>
					<text id="format_date-label">
						<value>This should display the current time in the 24 hr time format, HH:MM:SS: <output ref="format-date(now(), '%H:%M:%S')"/></value>
					</text>
					<text id="int_now-label">
						<value>This should display the current hour (not minutes) in 24 hour time: <output ref="int(format-date(now(), '%H'))"/></value>
					</text>
					<text id="min_time-label">
						<value>This should display minutes past the hour: <output ref="int((double(now())*24*60) - (int(double(now())*24)*60))"/></value>
					</text>
					<text id="dob-label">
						<value>Enter a birth date of 1/1/2010: </value>
					</text>
					<text id="age_calc/string_date-label">
						<value>This should display 2010: <output value="/data/string_hidden"/></value>
					</text>
					<text id="dob_validate-label">
						<value>This should display the age (in years) of a person born on 1/1/2010: <output value="/data/dob_years"/>
This should display the age (in months) of a person born on 1/1/2010: <output value="/data/months_hidden"/></value>
					</text>
				</translation>
				<translation lang="hin">
					<text id="f_intro-label">
						<value>This form tests date &amp; time functions. Please verify each question displays what it says it's supposed to. 

The following screen will display multiple questions per screen, if using an Android device. Otherwise, they'll be listed as separate questions.</value>
					</text>
					<text id="date_time-label">
						<value>date_time</value>
					</text>
					<text id="f_today-label">
						<value>This should display today's date with the format YYYY-MM-DD: <output ref="today()"/></value>
					</text>
					<text id="date_now-label">
						<value>This should also display today's date in the format YYYY-MM-DD: <output ref="date(now())"/></value>
					</text>
					<text id="date_int-label">
						<value>This should display an integer, which represents the date in days: <output ref="int(today())"/></value>
					</text>
					<text id="dt_int-label">
						<value>This should display a decimal number which represents the date and time in days: <output value="/data/date_time/hidden_datetime"/></value>
					</text>
					<text id="format_date-label">
						<value>This should display the current time in the 24 hr time format, HH:MM:SS: <output ref="format-date(now(), '%H:%M:%S')"/></value>
					</text>
					<text id="int_now-label">
						<value>This should display the current hour (not minutes) in 24 hour time: <output ref="int(format-date(now(), '%H'))"/></value>
					</text>
					<text id="min_time-label">
						<value>This should display minutes past the hour: <output ref="int((double(now())*24*60) - (int(double(now())*24)*60))"/></value>
					</text>
					<text id="dob-label">
						<value>Enter a birth date of 1/1/2010: </value>
					</text>
					<text id="age_calc/string_date-label">
						<value>This should display 2010: <output value="/data/string_hidden"/></value>
					</text>
					<text id="dob_validate-label">
						<value>This should display the age (in years) of a person born on 1/1/2010: <output value="/data/dob_years"/>
This should display the age (in months) of a person born on 1/1/2010: <output value="/data/months_hidden"/></value>
					</text>
				</translation>
			</itext>
		<setvalue event="xforms-ready" ref="/data/meta/deviceID" value="instance('commcaresession')/session/context/deviceid"/><setvalue event="xforms-ready" ref="/data/meta/timeStart" value="now()"/><bind nodeset="/data/meta/timeStart" type="xsd:dateTime"/><setvalue event="xforms-revalidate" ref="/data/meta/timeEnd" value="now()"/><bind nodeset="/data/meta/timeEnd" type="xsd:dateTime"/><setvalue event="xforms-ready" ref="/data/meta/username" value="instance('commcaresession')/session/context/username"/><setvalue event="xforms-ready" ref="/data/meta/userID" value="instance('commcaresession')/session/context/userid"/><setvalue event="xforms-ready" ref="/data/meta/instanceID" value="uuid()"/><setvalue event="xforms-ready" ref="/data/meta/appVersion" value="instance('commcaresession')/session/context/appversion"/><orx:pollsensor event="xforms-ready" ref="/data/meta/location"/><bind nodeset="/data/meta/location" type="geopoint"/></model>
	</h:head>
	<h:body>
		<trigger ref="/data/f_intro">
			<label ref="jr:itext('f_intro-label')"/>
		</trigger>
		<group ref="/data/date_time" appearance="field-list">
			<label ref="jr:itext('date_time-label')"/>
			<trigger ref="/data/date_time/f_today" appearance="minimal">
				<label ref="jr:itext('f_today-label')"/>
			</trigger>
			<trigger ref="/data/date_time/date_now" appearance="minimal">
				<label ref="jr:itext('date_now-label')"/>
			</trigger>
			<trigger ref="/data/date_time/date_int" appearance="minimal">
				<label ref="jr:itext('date_int-label')"/>
			</trigger>
			<trigger ref="/data/date_time/dt_int" appearance="minimal">
				<label ref="jr:itext('dt_int-label')"/>
			</trigger>
			<trigger ref="/data/date_time/format_date" appearance="minimal">
				<label ref="jr:itext('format_date-label')"/>
			</trigger>
			<trigger ref="/data/date_time/int_now" appearance="minimal">
				<label ref="jr:itext('int_now-label')"/>
			</trigger>
			<trigger ref="/data/date_time/min_time" appearance="minimal">
				<label ref="jr:itext('min_time-label')"/>
			</trigger>
		</group>
		<input ref="/data/dob">
			<label ref="jr:itext('dob-label')"/>
		</input>
		<trigger ref="/data/string_date" appearance="minimal">
			<label ref="jr:itext('age_calc/string_date-label')"/>
		</trigger>
		<trigger ref="/data/dob_validate" appearance="minimal">
			<label ref="jr:itext('dob_validate-label')"/>
		</trigger>
	</h:body>
</h:html>